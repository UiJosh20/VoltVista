<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard</title>
    <link rel="stylesheet" href="style/dashboard.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <link href="https://fonts.cdnfonts.com/css/lato-tr" rel="stylesheet" />
  </head>
  <body>
    <nav
      class="bg-white d-flex align-items-center justify-content-between w-100 shadow-sm"
    >
      <img
        width="20"
        height="20"
        src="https://img.icons8.com/ios-filled/50/menu--v1.png"
        alt="menu--v1"
        class="ms-2 ham"
      />
      <div>
        <img src="images/Frame 285.svg" alt="" />
      </div>
      <main class="d-flex justify-content-evenly navpart2">
        <div class="topHead">
          <h2>Dashboard</h2>
          <small id="displayName"></small>
        </div>

        <div class="searchDiv">
          <img src="images/circum_search.svg" alt="" />
          <input
            type="text"
            name=""
            id="searchIt"
            class="ms-2 inputIt"
            placeholder="Search"
          />
        </div>

        <div class="d-flex notification">
          <div id="displayUsername"></div>
          <img src="images/clarity_notification-line.svg" alt="" />
          <div id="displayProfile"></div>
        </div>
      </main>
    </nav>

    <section class="container-fluid mt-5">
      <main class="row">
        <div class="col-3 bg-white menu">
          <div class="d-flex gap-3 p-lg-4 align-items-center indicate">
            <img src="images/mdi-light_view-dashboard.svg" alt="" />
            <span>Dashboard</span>
          </div>
          <div class="d-flex gap-3 p-lg-4">
            <img src="images/iconamoon_profile-thin.svg" alt="" />
            <span>profile</span>
          </div>
          <div class="d-flex gap-3 p-lg-4">
            <img src="images/clarity_notification-line.svg" alt="" />
            <span>Notification</span>
          </div>

          <div class="d-flex gap-3 p-lg-4">
            <img src="images/arcticons_fpt-tv-remote.svg" alt="" />
            <span>Add appliances</span>
          </div>

          <div class="d-flex gap-3 p-lg-4">
            <img src="images/fluent_payment-28-regular.svg" alt="" />
            <span>Billing</span>
          </div>

          <div class="d-flex gap-3 p-lg-4">
            <img src="images/fluent-mdl2_switch-user.svg" alt="" />
            <span>Switch Account</span>
          </div>

          <div class="buttonMenu">
            <div class="d-flex gap-3 p-lg-4">
              <img src="images/arcticons_settings.svg" alt="" />
              <span>settings</span>
            </div>

            <div class="d-flex gap-3 p-lg-4">
              <img src="images/clarity_help-line.svg" alt="" />
              <span>Help</span>
            </div>

            <div class="d-flex gap-3 p-lg-4">
              <img src="images/logout.svg" alt="" />
              <span>logout</span>
            </div>
          </div>
        </div>
        <div class="col-lg-9 main3 col-sm-12">
          <main
            class="d-flex justify-content-between align-items-center mainChild p-2"
          >
            <div class="d-flex gap-2 align-items-center meter">
              <small>Meter Number:</small>
              <p>6463625252</p>
            </div>
            <button>Buy electricity</button>
          </main>

          <main class="main4 d-flex justify-content-between px-3">
            <div
              class="monitor bg-white col-4 d-flex justify-content-center flex-column shadow"
            >
              <small>Available Balance</small>
              <p>170.24<span>Kw/h</span></p>
            </div>

            <div
              class="monitor2 bg-white col-4 d-flex justify-content-center flex-column shadow"
            >
              <small>Estimated Usage Day</small>
              <p>28<span>Day(s)</span></p>
            </div>
          </main>

          <main class="main4 mt-4 d-flex justify-content-center">
            <div class="bg-white shadow p-5">
              <canvas id="electricityChart" width="872" height="515"></canvas>
            </div>
          </main>

          <main class="main4 mt-4 d-flex justify-content-center">
            <div class="bg-white shadow p-5">
              <canvas id="electricityChart1" width="872" height="515"></canvas>
            </div>
          </main>
        </div>
      </main>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
    <script type="module" src="script/dashboard.js"></script>
    <script>
      // JavaScript to toggle the menu
      const menu = document.querySelector(".menu");
      const ham = document.querySelector(".ham");

      ham.addEventListener("click", function () {
        menu.classList.toggle("active"); // Toggles the 'active' class on the menu
        ham.classList.toggle("active"); // Toggles the 'active' class on the hamburger icon
      });

      // Function to generate random electricity usage data
      function generateRandomData() {
        const data = [];
        for (let i = 0; i < 7; i++) {
          // Generate random values between 20 and 50 for kWh usage
          const randomValue = Math.floor(Math.random() * (50 - 20 + 1)) + 20;
          data.push(randomValue);
        }
        return data;
      }

      // Generate random electricity usage data
      const electricityData = generateRandomData();

      // Get the canvas element
      const ctx = document.getElementById("electricityChart").getContext("2d");
      const ctx1 = document
        .getElementById("electricityChart1")
        .getContext("2d");

      // Create the bar chart with Chart.js and Datalabels plugin
      const myChart = new Chart(ctx, {
        type: "bar",
        data: {
          labels: ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"],
          datasets: [
            {
              label: "Energy consumption trend ",
              data: electricityData,
              backgroundColor: "rgb(11, 97, 134)", // Adjust transparency for bars
              borderColor: "rgba(54, 162, 235, 1)",
              borderWidth: 1,
            },
          ],
        },
        options: {
          plugins: {
            datalabels: {
              color: "#fff", // Label text color
              font: {
                weight: "bold", // Label font weight
              },
              formatter: (value) => `${value} kWh`, // Format label value
            },
          },
          scales: {
            y: {
              beginAtZero: true,
              title: {
                display: true,
                text: "Electricity Usage (kWh)",
              },
            },
            x: {
              title: {
                display: true,
                text: "Days",
              },
            },
          },
        },
      });

      // Create the bar chart with Chart.js and Datalabels plugin
      const NewChart = new Chart(ctx1, {
        type: "bar",
        data: {
          labels: ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"],
          datasets: [
            {
              label: "Energy consumption trend (per appliance)",
              data: electricityData,
              backgroundColor: "rgb(19, 131, 179)", // Adjust transparency for bars
              borderColor: "rgba(54, 162, 235, 1)",
              borderWidth: 1,
            },
          ],
        },
        options: {
          plugins: {
            datalabels: {
              color: "#fff", // Label text color
              font: {
                weight: "bold", // Label font weight
              },
              formatter: (value) => `${value} kWh`, // Format label value
            },
          },
          scales: {
            y: {
              beginAtZero: true,
              title: {
                display: true,
                text: "Electricity Usage (kWh)",
              },
            },
            x: {
              title: {
                display: true,
                text: "Days",
              },
            },
          },
        },
      });
    </script>
  </body>
</html>
